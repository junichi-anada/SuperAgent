# 指示書: Sprint 7 - エージェント管理バックエンド実装

## 1. 目的
ユーザーが自分自身のエージェントを作成・管理できるようにするための、バックエンド機能を実装する。

## 2. 指示方針
- **技術スタック:** FastAPI, SQLAlchemy, Alembicを使用すること。
- **参考資料:** プロジェクトの全体像や細かい仕様で迷ったら、必ず `.documents/Project.md` を確認すること。
- **コーディング規約:** PythonはPEP8に従うこと。
- **アウトプット形式:** 作業が完了したら、変更・追加したファイルのパスと、それぞれの作業内容の簡単なサマリーをJSON形式で報告すること。
- **進捗報告:** 以下の作業手順を1つ実行するごとに、「ステップX完了」と簡潔に報告すること。

## 3. 作業手順

### ステップ1: DBモデルとマイグレーションの作成
1.  **モデルの追加:** `backend/models.py` に `Agent` モデルを追加してください。
    - カラム: `id`, `name`, `description`, `created_at` を最低限含めてください。
    - `owner_id` カラムを追加し、`users.id` への外部キーとして設定してください。
2.  **マイグレーションファイルの生成:** `alembic revision --autogenerate -m "Create agents table"` を実行して、マイグレーションファイルを生成してください。
3.  **DBへの適用:** `alembic upgrade head` を実行して、`agents` テーブルをデータベースに作成してください。

### ステップ2: スキーマとCRUDの追加
1.  **スキーマの追加:** `backend/schemas.py` に `AgentBase`, `AgentCreate`, `Agent` といったPydanticスキーマを追加してください。
2.  **CRUD関数の追加:** `backend/crud.py` に、エージェントを作成・取得・更新・削除するためのCRUD関数を追加してください。

### ステップ3: APIエンドポイントの実装
1.  **ルーターの作成:** `backend/routers/agents.py` を新規作成してください。
2.  **CRUDエンドポイントの実装:** エージェントの `作成 (POST)`, `一覧取得 (GET)`, `個別取得 (GET)`, `更新 (PUT)`, `削除 (DELETE)` を行うためのAPIエンドポイントを実装してください。
3.  **認証の追加:** これらのエンドポイントは、ログインしているユーザーのみが操作できるように、JWT認証で保護してください。
4.  **メインアプリへの統合:** `backend/main.py` で、作成した `agents` ルーターをインクルードしてください。

## 4. 完了報告
全ての作業が完了したら、最終的な成果物として、指示方針で定めた通りのJSON報告を行ってください。
