# 指示書: Sprint 5 - ユーザー認証バックエンド実装

## 1. 目的
アプリケーションのセキュリティの基礎となる、ユーザー登録およびログイン機能をバックエンドに実装する。

## 2. 指示方針
- **技術スタック:** FastAPI, SQLAlchemy, Alembic, PostgreSQLを使用すること。
- **参考資料:** プロジェクトの全体像や細かい仕様で迷ったら、必ず `.documents/Project.md` を確認すること。
- **コーディング規約:** PythonはPEP8に従うこと。
- **アウトプット形式:** 作業が完了したら、変更・追加したファイルのパスと、それぞれの作業内容の簡単なサマリーをJSON形式で報告すること。
- **進捗報告:** 以下の作業手順を1つ実行するごとに、「ステップX完了」と簡潔に報告すること。

## 3. 作業手順

### ステップ1: 依存ライブラリの追加
- **対象ファイル:** `backend/requirements.txt`
- **作業内容:** 以下のライブラリを追記してください。
    ```
    sqlalchemy
    psycopg2-binary
    alembic
    passlib[bcrypt]
    python-jose[cryptography]
    ```

### ステップ2: DBモデルとマイグレーションの作成
- **作業内容:**
    1.  SQLAlchemyを使い、`users`テーブルに対応するモデルを `backend/models.py` に作成してください。最低限、`id`, `username`, `email`, `hashed_password`, `created_at` カラムを含めてください。
    2.  Alembicを初期化し、`users`テーブルを作成するためのマイグレーションファイルを生成してください。
    3.  （このステップではマイグレーションの実行までは不要です）

### ステップ3: 認証APIの実装
- **作業内容:**
    1.  認証関連のロジックをまとめるため、`backend/auth.py` を新規作成してください。パスワードのハッシュ化やJWTトークンの生成・検証を行う関数を実装します。
    2.  APIエンドポイントを定義するため、`backend/routers/auth.py` を新規作成してください。
    3.  `/auth/signup` エンドポイント（ユーザー登録）を実装してください。
    4.  `/auth/token` エンドポイント（OAuth2準拠のトークン発行）を実装してください。
    5.  `backend/main.py` で、作成した認証ルーターをインクルードしてください。

## 4. 完了報告
全ての作業が完了したら、最終的な成果物として、指示方針で定めた通りのJSON報告を行ってください。
